#ifndef PARSER_H
#define PARSER_H

#include <vector>

#include "Monom.h"
#include "Token.h"

/**
 * @brief Класс Parser выполняет синтаксический анализ последовательности токенов.
 *
 * Парсер преобразует поток токенов в структурированные мономы (Monom),
 * обрабатывая:
 * - знаки (+/-) перед мономами
 * - целые числа и дроби в качестве коэффициентов
 * - переменную x и её степень
 * - явное и неявное умножение
 *
 * Поддерживает выражения вида: "3x^2", "-1/2x", "5", "x", "2*x^3"
 */
class Parser {
public:
    /**
     * @brief Преобразует последовательность токенов в вектор мономов.
     *
     * Алгоритм парсинга:
     * 1. Обрабатывает опциональный знак (+/-) для каждого монома
     * 2. Читает коэффициент (целое число или дробь)
     * 3. Обрабатывает переменную x и её степень
     * 4. Собирает моном и добавляет в результат
     *
     * @param tokens Входной вектор токенов от лексера
     * @return std::vector<Monom> Вектор распарсенных мономов
     * @throws UniversalStringException При синтаксических ошибках во входных данных
     */
    static std::vector<Monom> parse(std::vector<Token> &tokens);
};

#endif // PARSER_H