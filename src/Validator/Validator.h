#ifndef VALIDATOR_H
#define VALIDATOR_H

#include <string>
#include <vector>

#include "../RationalNumber.h"
#include "../Exceptions/UniversalStringException.h"

#include "Utils/Lexer.h"
#include "Utils/Parser.h"

class Validator {
public:
    /**
     * @brief Данный метод является валидатором строки, представляющий длинное натуральное число.
     *
     * Инвариант: строка не пустая, не содержит символы формата - не цифры, не содержит ведущих нулей.
     *
     * Используются итераторы для минимизации использования лишних копирований, и действий со стороны
     * процессора.
     *
     * @param input Вводная строка, представляет собой длинное натуральное число.
     */
    static void validateNaturalNumber(std::string& input);

    /**
     * @brief Данный метод является валидатором строки, представлющяя длинное целое число.
     *
     * Инварианты - допускает числа которые либо содержат знак - или вовсе не содержат знака
     * Возможный ввод: -0001 -> -1, 423.
     * Невозможный ввод: -, +13, -+42, --24.
     *
     * @param input Входная строка, представляет собо длинное целое число.
     */
    static void validateIntegerNumber(std::string& input);

    /**
     * @brief Данный метод является валидатором строки, представляющий длинное рациональное число.
     *
     * @details Проверяет на наличие символа - делителя, затем получает два числа
     * делимое и частное, проверяет их валидаторами целого и натурального числа
     * проверят на то что нижнее не ноль, и сконкатенирует в результат.
     *
     * Инварианты: делитель не может быть нулем. Делитель -  число натуральное, частное - целое.
     *
     * @param input Входня строка, представляет собой длинной рациональное число.
     */
    static void validateRationalNumber(std::string& input);

    /**
     * @brief Валидирует строку, представляющую полином, и возвращает вектор коэффициентов.
     *
     * @details Алгоритм работы:
     * 1. Лексический анализ входной строки с преобразованием в токены
     * 2. Синтаксический анализ токенов с построением мономов
     * 3. Проверка уникальности степеней в полиноме
     * 4. Построение вектора коэффициентов, где индекс = степень x
     *
     * Инварианты:
     * - Степени мономов должны быть уникальными
     * - Коэффициенты должны быть валидными рациональными числами
     * - Полином представляется в виде a₀ + a₁x + a₂x² + ... + aₙxⁿ
     *
     * Пример: "3x^2 + 2x + 1" → вектор [1/1, 2/1, 3/1]
     *
     * @param input Входная строка, представляющая полином с рациональными коэффициентами
     * @return std::vector<RationalNumber> Вектор коэффициентов, где индекс элемента соответствует степени x
     * @throws UniversalStringException При пустой строке, синтаксических ошибках или дублирующихся степенях
     */
    static std::vector<RationalNumber> validatePolynomial(std::string& input);
};



#endif //VALIDATOR_H